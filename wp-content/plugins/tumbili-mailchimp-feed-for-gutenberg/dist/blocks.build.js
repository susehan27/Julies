!function(e){function t(l){if(n[l])return n[l].exports;var i=n[l]={i:l,l:!1,exports:{}};return e[l].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,l){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:l})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(1)},function(e,t,n){"use strict";var l=n(2),i=(n.n(l),n(3)),r=(n.n(i),n(4)),a=n(5),__=wp.i18n.__;(0,wp.blocks.registerBlockType)("cgb/tumbili-mailchimp-for-gutenberg",{title:__("Tumbili: Mailchimp for Gutenberg"),icon:"email-alt",category:"common",keywords:[__("tumbili"),__("mailchimp")],attributes:r.a,edit:a.a,save:function(e){return e.attributes,e.className,null}})},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var l={apiKey:{type:"string",default:""},listID:{type:"string",default:""},showFirstName:{type:"boolean",default:!1},showLastName:{type:"boolean",default:!1},buttonBackground:{type:"string",default:""},buttonColor:{type:"string",default:""},buttonText:{type:"string",default:"Submit"},labelColor:{type:"string",default:""},fields:{type:"array",default:[]}}},function(e,t,n){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){var n=[],_n=!0,l=!1,i=void 0;try{for(var r,a=e[Symbol.iterator]();!(_n=(r=a.next()).done)&&(n.push(r.value),!t||n.length!==t);_n=!0);}catch(e){l=!0,i=e}finally{try{!_n&&a.return&&a.return()}finally{if(l)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,n,l){return n&&e(t.prototype,n),l&&e(t,l),t}}(),u=wp.element.Component,s=wp.editor,c=s.InspectorControls,m=s.PanelColorSettings,p=wp.components,d=p.PanelBody,f=p.TextControl,w=p.ToggleControl,b=p.Button,h=p.SelectControl,v=p.Icon,__=wp.i18n.__,y=function(e){function t(){l(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.addField=function(){var t={label:e.state.newFieldLabel,value:e.state.newFieldValue,type:e.state.newFieldType,options:e.state.newFieldOptions,fullWidth:e.state.newFieldFullWidth};if(!t.label&&!t.value)return alert("Please add a label and MERGE tag first"),!1;e.props.setAttributes({fields:e.props.attributes.fields.concat(t)}),e.setState({newFieldLabel:"",newFieldValue:"",newFieldOptions:[],newFieldOptionLabel:"",newFieldFullWidth:!1})},e.addFieldOption=function(){var t={label:e.state.newFieldOptionLabel};e.setState({newFieldOptions:e.state.newFieldOptions.concat(t),newFieldOptionLabel:""})},e.removeField=function(t){var n=e.props.attributes.fields.filter(function(e,n){return n!==t});e.props.setAttributes({fields:n})},e.removeFieldOption=function(t){var n=e.state.newFieldOptions.filter(function(e,n){return n!==t});e.setState({newFieldOptions:n})},e.onReorder=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"options",n=arguments[1],l=arguments[2],i=arguments[3],r=Array.from(n),o=r.splice(l,1),u=a(o,1),s=u[0];r.splice(i,0,s),"options"===t?e.setState({newFieldOptions:r}):e.props.setAttributes({fields:r})},e.state={newFieldLabel:"",newFieldValue:"",newFieldType:"text",newFieldFullWidth:!1,newFieldOptions:[],newFieldOptionLabel:""},e}return r(t,e),o(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.attributes,l=n.showFirstName,i=n.showLastName,r=n.apiKey,a=n.listID,o=n.buttonBackground,u=n.buttonColor,s=n.fields,p=n.buttonText,y=n.labelColor,F=t.className,E=t.setAttributes,g=this.state,C=g.newFieldLabel,O=g.newFieldValue,N=g.newFieldType,x=g.newFieldOptionLabel,k=g.newFieldFullWidth,S=void 0;l&&(S=wp.element.createElement("div",{className:"tumbili-form-control flex-grow"},wp.element.createElement("label",{htmlFor:"firstName",style:{color:y}},"First Name",wp.element.createElement("input",{name:"firstName",type:"text"}))));var L=void 0;i&&(L=wp.element.createElement("div",{className:"tumbili-form-control flex-grow"},wp.element.createElement("label",{htmlFor:"lasttName",style:{color:y}},"Last Name",wp.element.createElement("input",{name:"lastName",type:"text"}))));var T=wp.element.createElement("input",{style:{color:u,background:o},className:"tumbili-submit",type:"submit",value:p}),_=s.map(function(t,n){var l=t.fullWidth?"is-full-width":"",i="text"===t.type?wp.element.createElement("input",{name:t.value,type:"text"}):wp.element.createElement("select",{name:t.value},wp.element.createElement("option",{value:t.options[0].label},t.options[0].label)),r=n>0?wp.element.createElement("span",{onClick:function(){return e.onReorder("fields",e.props.attributes.fields,n,n-1)}},wp.element.createElement(v,{icon:"arrow-up"})):"",a=n<s.length-1?wp.element.createElement("span",{onClick:function(){return e.onReorder("fields",e.props.attributes.fields,n,n+1)}},wp.element.createElement(v,{icon:"arrow-down"})):"";return wp.element.createElement("div",{key:n,className:"tumbili-form-control flex-grow "+l},wp.element.createElement("label",{htmlFor:t.value,style:{color:y}},t.label,i),wp.element.createElement("div",{className:"tumbili-field-action"},r,a,wp.element.createElement("span",{onClick:function(){return e.removeField(n)}},wp.element.createElement(v,{icon:"dismiss"}))))}),P=void 0;P=r&&a?wp.element.createElement("div",{className:"display-flex tumbili-container"},S,L,wp.element.createElement("div",{className:"tumbili-form-control flex-grow"},wp.element.createElement("label",{htmlFor:"email",style:{color:y}},"Email",wp.element.createElement("input",{name:"email",type:"email"}))),_,wp.element.createElement("div",{className:"tumbili-form-control flex-grow flex-is-at-bottom"},T)):wp.element.createElement("div",{className:F},"To get started please add an API Key & List ID.");var A=void 0;if("select"===N){var j=this.state.newFieldOptions.map(function(t,n){return wp.element.createElement("div",{key:n,className:"tumbili-field-option"},wp.element.createElement("span",null,t.label),wp.element.createElement("div",null,wp.element.createElement("span",{onClick:function(){return e.onReorder("options",e.state.newFieldOptions,n,n-1)}},wp.element.createElement(v,{icon:"arrow-up"})),wp.element.createElement("span",{onClick:function(){return e.onReorder("options",e.state.newFieldOptions,n,n+1)}},wp.element.createElement(v,{icon:"arrow-down"})),wp.element.createElement("span",{onClick:function(){return e.removeFieldOption(n)}},wp.element.createElement(v,{icon:"dismiss"}))))});A=wp.element.createElement("div",{className:"tumbili-type-options"},wp.element.createElement(f,{label:"Option",value:x,onChange:function(t){return e.setState({newFieldOptionLabel:t})}}),wp.element.createElement(b,{isOutline:!0,isSmall:!0,onClick:this.addFieldOption},"Add Option"),j)}return wp.element.createElement("div",{className:F},wp.element.createElement(c,null,wp.element.createElement(d,{title:__("Form Options")},wp.element.createElement(f,{label:__("Mailchimp API Key"),value:r,onChange:function(e){return E({apiKey:e})}}),wp.element.createElement(f,{label:__("Mailchimp List ID"),value:a,onChange:function(e){return E({listID:e})}}),wp.element.createElement(w,{label:__("Show First Name?"),checked:l,onChange:function(e){return E({showFirstName:e})}}),wp.element.createElement(w,{label:__("Show Last Name?"),checked:i,onChange:function(e){return E({showLastName:e})}}),wp.element.createElement(m,{title:__("Color Settings"),colorSettings:[{value:o,onChange:function(e){return E({buttonBackground:e})},label:__("Button Background Color")},{value:u,onChange:function(e){return E({buttonColor:e})},label:__("Button Text Color")},{value:y,onChange:function(e){return E({labelColor:e})},label:__("Field Label Color")}]}),wp.element.createElement(f,{label:__("Submit Text"),value:p,onChange:function(e){return E({buttonText:e})}})),wp.element.createElement(d,{title:__(" Custom Fields ")},wp.element.createElement(f,{label:"Field label",value:C,onChange:function(t){return e.setState({newFieldLabel:t})}}),wp.element.createElement(f,{label:"*|MERGE|* Tag",value:O,help:__("the *|MERGE|* tag value corresponding with that field, in your MailChimp audience"),onChange:function(t){return e.setState({newFieldValue:t})}}),wp.element.createElement(w,{label:"Full width",checked:k,onChange:function(){return e.setState(function(e){return{newFieldFullWidth:!e.newFieldFullWidth}})}}),wp.element.createElement(h,{label:"Field type (more coming soon)",value:N,options:[{label:"Text",value:"text"},{label:"Select",value:"select"}],onChange:function(t){e.setState({newFieldType:t})}}),A,wp.element.createElement(b,{isDefault:!0,onClick:this.addField},"Add Custom Field"))),P)}}]),t}(u);t.a=y}]);